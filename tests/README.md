# Tests

Python unit tests cover the CLI (`sandbox.py`) and utilities. Molecule scenarios use **pytest-testinfra** for system-state verification.

## Test Overview
- **tests/test_sandbox.py** – CLI workflows: activation `.env`, runtime detection, SSH keys, container setup, role/collection handling, playbook wiring
- **test_DECRYPT_VAULTED_ITEMS.py** – Vault helper tests

## Running Tests
From repo root (after `python sandbox.py activate` and `source .venv/bin/activate` if you want the venv):
```bash
python -m unittest -v tests/test_sandbox.py
python -m unittest -v test_DECRYPT_VAULTED_ITEMS.py
```

## CI/CD Integration
GitHub Actions runs the Python unit tests across Python 3.10–3.14 (see [`.github/workflows/unit-tests.yml`](../.github/workflows/unit-tests.yml)). Molecule scenarios run separately in their workflow matrix.

## Notes
- Tests use temporary directories and mocks to avoid external side effects.
- Container and Ansible commands are mocked in unit tests; real runs happen only in Molecule scenarios.
- Keep `.env` and `.venv` out of git—they are generated by `python sandbox.py activate`.
